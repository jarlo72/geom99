<!DOCTYPE html>
<html lang="en-CA"> 
    <head>
        <!-- https://jarlo72.github.io/web1/process.html -- will change once imported to Luna -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--to make it responsive--> 
        <meta charset="UTF-8">
        <title>VITA 2022 Processes</title>
        <link rel="stylesheet" href="stylesheet.css">
        <link rel="icon" href="images/logo_v2.png"> <!--Reference: https://www.delftstack.com/howto/html/html-tab-icon/-->
    </head>
    <body>
        <nav class="topnav" id="myTopnav">
            <a href="index.html">Home</a> 
            <a class="active" href="process.html">Methodology and Processes</a> 
            <a href="solution.html">Solution</a>
            <a class ="solutionlink" href="WebSceneArcgisJsApi.html" target="_blank">Self-Guided Tour</a>
            <a class ="solutionlink" href="https://storymaps.arcgis.com/stories/4e084de88c7a46849df2601ae3f57111" target="_blank">Guided Tour</a>
        </nav>

        <header>
            <figure> 
                <img src="images/VITA2022Logo.png" alt="VITA2022 logo" id="logo"> 
            </figure>                
        </header> 
        <main>
            <section>
                <h2 class="projectTitle">GEOM99 Group Project</h2>

                <!-- Start of Topic Selection -->
                <article class="ContentParagraph1"><h3 class="underlineTitle1">Topic Selection</h3> 
                    <p> Our project centers on the Vancouver Island Trail on Vancouver Island in British Columbia.  The trail is currently under construction
                        and is being promoted and monitored by the Vancouver Island Trail Association (aka VITA for short).
                        Some members of or group are working with VITA for their final collaborative work, and this project is a first blush of web map possibilities
                        for the trail.</p>
                    
                    <article class = "serve leftText">
                        <div class="textZone">
                            <h5> Initial Overview</h5>
                            <p> VITA's website contains only images of maps; there are no active interfaces for users and no capabilities for hikers to investigate sections of trails
                            for possible hikes. VITA2022 therefore decided to focus on providing one or more options for an interactive web maps.  As described below, we floated an idea of integrating
                             various features into the interactive web map. 
                            </p>
                        </div>
                        <figure class="picBox">
                            <img src="images/Process images/ugly VIT map.jpg" alt="VIT map" class="smallimageright">
                        </figure> 
                    </article>

                    <article class = "serve rightText">
                        <div class="textZone">
                        <h5>Possible Features Within Map</h5>
                        <p>The initial concept floated was a web-based GIS solution incorporating open-source data for both wildlife sightings and weather 
                            forecasts to make an informative and accessible web map of the Vancouver Island Trail.  A map, possibly derived from either 
                            Google Maps JavaScript API or Leaflet, would include pop-up information on geo-referenced wildlife sightings from
                            <a href = https://www.inaturalist.org/ target="_blank">iNaturalist</a>, or possibly weather forecasts from <a href = https://openweathermap.org/ target="_blank">OpenWeather Live</a>.
                            Base mapping data may also be sourced from <a href =https://www.openstreetmap.org/ target="_blank">Open Street Maps</a>.<br>
                            Upon review of Google Maps, however, we realized the potential cost to our non-profit client would be prohibitive,
                            so our focus shifted to other map options. Furthermore, it was pointed out to us that the project scope was too large 
                            and we were advised to pull back our ambitions and focus solely on creating a web map.  We dropped the idea of incorporating the wildlife sightings
                            and weather forecasts.
                        </p>
                        </div>
                        <figure class="picBox">
                            <img src="images/Process images/iNaturalist_logo.png" alt="iNaturlist logo" class="smallimageleft">
                        </figure>
                    </article>

                    <!-- Start of Exploring Technologies -->
                    <article class="ContentParagraph1"><h3 class="underlineTitle1">Exploring Technologies and Scope Changes</h3> 
                        <p> The map is key to the project and the team spent considerable time researching all possible map alternatives.</p>

                    <article class = "serve leftText">
                        <div class="textZone">
                        <h5>Exploring Technologies for Map</h5>
                        <p> Team members researched additional alternative map solutions and explored online tutorials for Experience Builder, Geocortex, 
                            Leaflet, Mapbox, and StoryMaps.  Experience Builder can portray a map, but  its real power is to showcase data analysis and statistics.  These functions are not
                            the  focus of this project, so Experience Builder was discarded.  Team member experience with Geocortex, and review of past Fleming projects revealed that Geocortex
                            is not a reliable tool to use, so it too was put aside. Ultimately we opted to center on using either Esri Leaflet, StoryMaps, or Mapbox for the base map, 
                            stored on an ArcGIS server.  Since our client is a non-profit agency, we proposed to narrow our focus even more to use well-documented open source solutions.  
                            However, at a meeting with our professor, we were directed to focus solely on showcasing our map within <a href="https://www.esri.com/en-us/arcgis/products/arcgis-storymaps/overview" target="_blank">StoryMaps.</a>
                        </p>  
                        </div>
                        <figure class="picBox">
                            <img src="images/Process images/Leaflet.jpg" alt="Leaflet logo" class="smallimageright">
                        </figure>
                    </article>

                    <article class = "serve rightText">
                        <div class = "textZone">
                        <h5>Trail map using open-source Esri technologies</h5>
                        <p> After the initial meeting with our professor about our direction using Esri Leaflet, StoryMaps, or Mapbox, we were directed towards specifically open-source Esri solutions.
                            Taken it into consideration, our already proof working StoryMap that we've used initially before the scope change, we continued to develop the map and add more functionality.
                            For the hosting data portion of the project, we continued to use ArcGIS Online (AGOL) for contribution purposes and storage of map feature layers, the StoryMaps map, and other miscellaneous
                            items for use in our project. Another component of the project that we decided to implement after a second touchbase with our professor was the use of <a href="https://developers.arcgis.com/javascript/latest/" target="_blank">ArcGIS API for JavaScript.</a>
                            This portion of the project was selected because the StoryMaps map that we developed only gave the option of a "guided" like tour, showcasing the different sections and trail heads 
                            throughout the trail system. In response to this, we decided to make an interactive "self-guided" version of our proposed map that allows the user to zoom in/out, see elevation profiles
                            of different sections of the trail, select between different basemaps to extract more context out of the map, showcase their location using the location service, and have a quick glance
                            at the different trail sections by viewing the legend. 
                        </p>  
                        </div>  
                        <figure class="picBox">
                            <img src="images/Process images/Storymap.jpg" alt="Our StoryMap" class="smallimageleft">
                        </figure>
                    </article>

                    <article class = "serve leftText">
                        <div class = "textZone">
                        <h5>Sharing and contribution via ArcGIS Online (AGOL)</h5>
                        <p> Early on in the project, we had discussed and explored how and where our data for our trail maps will be stored. Based on that conversation along with a meeting with our professor on
                            the matter, we decided to store, use, and contribute to AGOL; this was done my making a folder repository on AGOL and sharing it via an AGOL group. Once that was established, data found
                            on VITA’s website and other additional data needed were brought into the AGOL folder environment which we used to make the StroyMaps map and store it along with the trail data for the ArcGIS
                            API for Javascript map.
                        </p>  
                        </div>  
                        <figure class="picBox">
                            <img src="images/Process images/API.jpg" alt=" API map" class="smallimageright">
                        </figure>         
                    </article>
                </article>

                <!-- Start of Data Acquisition -->
                <article> 
                    <div class="ContentParagraph">
                        <h3 class="underlineTitle">Data Acquisition, Processing and Publishing</h3> 
                        <p> This segment in our methodology covers the process of acquiring the raw data to establishing our ArcGIS Online Web-map.</p>
                        <h4>Examining the Data</h4>
                        <p> Our data acquisition was made simple as most, if not all, of our trail data was available from our collaborative project client’s 
                            (VITA) website <a href = "https://vi-trail.ca/">https://vi-trail.ca/</a>. This included the trail tracts and the trailhead data from their trail maps 
                            and guidebook respectively. The Trail Tracts (polyline) and Trail head (points) would serve as the primary operational layers in this application</p> 
                        <p> Upon exploration of VITA’s resources, it was discovered that trail tract data became increasingly sparse / unavailable towards the northern 
                            portion of the trail. The availability of this data dictated the geographic scope of our trail map, hence, the necessary scope change from earlier. 
                            Thus, it was decided to only include the consistent southern portion of the Vancouver Island trail in our trail map, from Point Clover in Victoria, 
                            BC to Port Alberni. </p> 
                        <h4>Trail Tract Data</h4>
                        <img class="solutionImage" src="images/Process images/geoJSON_io2.JPG" alt=" GeoJSON Map">
                        <p>Firstly, the trail tracts (the polyline features) from Point Clover to Port Alberni were acquired as 7 GPX files, representing 7 trail segments. 
                            These GPX files were converted into a GeoJSON file using <a href = "https://geojson.io/#map=2/20.0/0.0">geojson.io</a>. This GeoJSON file would be 
                            published into ArcGIS Online as a hosted feature layer.</p>
                        <h4>Trail head Data</h4>
                        <p>Secondly, the trail head data was needed in the form of point features. This was trickier since trail heads were not originally in digital format 
                            but in coordinate (latitude / longitude) descriptions in the trail guide-book. Similar to the trail tract data, trail head data became increasingly 
                            sparse and inconsistent towards the northern portions and thus, for consistency and completeness, resorted to using only the southern trail heads from 
                            Point Clover to Port Alberni. These trail heads aligned with the trail tract data, however with a discrepancy that 14 trail head points were acquired in 
                            contrast to the 7 trail tracts/ segments acquired earlier. It was found that the 7 trail segments used the same trail heads to define the start-end of 
                            the segment just at a different frequency. Thus, the trail head and trail tract data are valid.  Forming trailhead data in csv from trail guide-book and 
                            publishing as hosted feature layer</p>
                        <p>A CSV file was drafted to store and tabulate the trail head latitude and longitude coordinates. In this table, trail head start and end names and length were included. 
                            This CSV file would then be published onto ArcGIS Online as a hosted feature layer, with the lat/long coordinates representing the point feature. </p>
                        <h4>Initial Base Map</h4>
                        <p>With the trail tracts (polyline features) and trail head (point) features, an initial web map was created with appropriate symbology set up to emphasize the trail data: 
                            <a href="https://fleming.maps.arcgis.com/apps/mapviewer/index.html?webmap=46df05449e524dc0993b114f96eaa12c">Vancouver Island Trail Map</a>. This web-map would serve as 
                            the basis to upon other configurable solutions may be built upon.</p> 
                        <img class="solutionImage" src="images/Process images/AGOL_basemap2.jpg" alt=" GeoJSON Map">  
                    </div>
                </article>

                <!-- Start of Story Maps -->
                <article> 
                    <div class="ContentParagraph"><h3 class="underlineTitle">Creating a StoryMaps Map</h3> 
                        <p> For our first web configurable we created an ArcGIS StoryMaps to produce a web solution from our problem statement. ArcGIS StoryMaps is a story authoring web-based 
                            application that allows developers to create a narrative using maps, text, and other multimedia content. Given that the Vancouver Island Trail is not yet fully 
                            complete, we thought StoryMaps would be a great way for potential recreators to explore the developed sections of the trail through a guided map tour.
                        </p>
                        <h4>Process</h4>
                        <p>In preparation for building the StoryMaps, our team created a Shared Update group on our college’s AGOL account to allow all team members to contribute to editing 
                            of the StoryMaps. The group administrator invited other team members with roles set to manager to allow members to edit and publish the StoryMaps. 
                        </p>
                        <p>To create a StoryMaps we visited the ArcGIS StoryMaps site and chose to create a new story using the Start from Scratch option. Team members filled out cover 
                            information, which included adding our logo, trail system name, authorship, and brief description of the trail system. A Map Tour was then added into the 
                            StoryMaps following the trail system descriptions. Within StoryMaps, there are two options when creating a Map Tour, and our team explored both the data-driven 
                            and non-data driven approach to decide which style of Map Tour was best suited the project’s goals.    
                        </p>
                        <h5>Data Driven Approach</h5>
                        <p>We first selected the data-driven approach which allowed us to upload exact trail head point data into the StoryMaps from our AGOL account as the stopping points 
                            along the Map Tour. This approach automatically created the stopping points for the Map Tour and drew trail names from each of the point features. The side panel 
                            for each tour stop or trail head was auto populated with the trail name from the trail head point feature class. Where the side panel was driven by the trail head 
                            feature class it was not mutable in StoryMaps, and only contained the trail head name. Our team also adjusted the view of the map for each stop to adjust the zoom 
                            level. Using a data driven approach, only 2D map visualizations were available.
                        </p>
                        <h5>Non-Data Driven Approach</h5>
                        <p>As an alternative approach, we explored creating a Map Tour using a non-data driven approach, where trail heads were added on the map manually. Our team added trail 
                            heads on the map to correspond to the base map which had trail head point features and trail polylines visualized. Where trail heads were placed manually, the side 
                            panels were not auto populated with data and our team was able to add in photos, trail head names, and trail descriptions in the side panel. Our team also adjusted 
                            the view of the map for each stop to adjust zoom level and 3D perspective by adjusting the aspect.
                        </p>
                        <h4>Discussion on shortfalls, limitations or what went wrong</h4>
                        <p>Based on our exploration of creating a Map Tour in our StoryMaps, our team decided to use the non-data driven approach to create a guided tour of the Vancouver Island 
                            Trail. Although the data-driven approach secured the most accurate locations for trail heads, it autogenerated the Map Tour from the trail head feature layer data 
                            exclusively, creating stops at each trail head in the trail head feature layer. The auto generation of the tour extended to the descriptive side panels for each trail 
                            head or tour stop as well. Where the side panels were autogenerated using a data-driven approach, we could not add in trail photos, trail profile graphs, and include 
                            trail descriptions into the panel while using StoryMaps. While using a non-data driven approach, each stop and associated description side panel was created manually 
                            which allowed us to add in trail names, elevation profiles, trail descriptions, and photos. 
                        </p>
                        <p>The data driven approach also did not allow us to create a 3D perspective of the trail. Given the diverse topography of the area, we wanted to highlight elevation ranges 
                            using a 3D perspective of the trail system. The data driven approach only accepted point features as stops, and in between each trailhead stop the pan to the next trailhead 
                            was linear and fast, resulting in the tour not visualizing the trail for the user well but just the trail head. Using a non-data driven with trailheads as stops, we were able 
                            to adjust the 2D scene into a 3D scene and change the perspective of the map by adjusting the aspect to influence the pan between stops to show the trail section. With the 
                            capabilities of a 3D scene, we angled the perspective, so that the view at any time in the tour was from one trailhead to the next. When moving onto the next trailhead, the 
                            map panned with the direction of the trail allowing the user to observe the trail. 
                        </p>
                        <p>Although the non-data driven approach was not as accurate for trailhead locations, we were able to include accurate data for trailheads onto the base map used in the non-data 
                            driven approach and manually add in tour stops that corresponded to the trailhead feature layer. Given that the purpose of the StoryMaps is not for navigation, but rather for 
                            guiding and introducing users to the Vancouver Island Trail through a guided tour, we decided that the trailhead stops did not have to be accurate to a navigational standard. 
                        </p>
                        <p>In our final review of our created StoryMaps, there were some technical limitations with the configurable tool that did not cover our vision for a web application for the 
                            Vancouver Island Trail. We needed to create an additional solution that was more customizable, that would allow a user to explore the area through a self-guided tour and query 
                            from the web map.  
                        </p>
                    </div>
                </article>

                <!-- Start of API Map -->
                <article> 
                    <div class="ContentParagraph"><h3 class="underlineTitle">Creating an ArcGIS API for JavaScript Map</h3> 
                        <h4>Lead-Up</h4>
                        <p> Our next objective was to find a more customizable solution that would act as a self-guided tour (ie more interactive features) that would be complimentary to the story maps. 
                            A potential solution would be something like the <a href = "https://github.com/Esri/hiking-trails-app">Swiss hiking trail application</a>. Our approach would be to use the provided libraries, 
                            coding and documentation but alter the service and data to match what we have. Unfortunately, due to technical problems getting this application built and running with the base 
                            data alone, we abandoned this resource. It seemed either beyond our skill-level or beyond scope of our project (i.e. not a good use of time) to troubleshoot these errors. However, 
                            we realized the functionalities we were trying to emulate could be done via <a href="https://developers.arcgis.com/javascript/latest/">ArcGIS API for JavaScript</a>. 
                        </p>
                        <p>ArcGIS API for JavaScript would be beneficial to us in two ways: First, it offered highly customizable solutions due to the coding involved, allowing low-level control over the features 
                            we incorporate. Second, we were familiar with this API and its documentation due to being part of the GEOM99 curriculum. </p>
                        <h4>Process</h4>
                        <p>The approach to the development of a web-map using ArcGIS API for JavaScript was using the tutorials and documentation to explore and implement which features were relevant to a trail map. 
                            We would use the sample codes provided in the documentation to start off and adapt it accordingly. </p>    
                        <p>The basis of this interactive web-map would be a 3D perspective of the trail and its surroundings which the user may pan over. To do that, a web-scene was created from the trail tract and 
                            trail head feature layers, and symbolized appropriately, as was done for the initial web-map. </p>
                        <p>From that, we would try to add features including functionality to change base maps, display and track location, a legend, expandable widgets, sketching and measuring polylines, customized 
                            pop-ups and elevation profiles. We understood there could more features to add that would be appropriate trail map, but rationalized this would be sufficient for us to tackle within our 
                            limited time. </p>
                        <p>In the end, we were able to produce an interactive web-map that displays the trails and trailheads, gives user various viewing controls (zoom, pan, rotate) in a 3D environment, with 
                            location tracking, functionality to change base maps, legend, expandable widgets and create custom elevation profiles. </p>
                        <h4>Discussion on shortfalls, limitations or what went wrong</h4>
                        <p>Throughout the process of developing a trail map of Vancouver Island Trail using ArcGIS API for JavaScript, the main challenges we encountered involved interpreting and adapting the sample 
                            codes to our needs. In essence, we were working at a high-level, recognizing syntax patterns and trying to see which codes worked via trial and error. There were many times when the sample 
                            codes provided in the tutorial did not work the way we wanted (if at all) and the documentation was either too vague or incomplete for us to resolve it. This was the case when trying to 
                            implement the custom pop-ups feature. However, in most of the case where the documentation was specific and accessible and the sample coding was simple to take apart and understand, 
                            we overcame these challenges. </p>
                        <p>We did find we were limited in our general understanding of coding, specifically in JavaScript. In the end, we learned how to manipulate the provided code but would not be capable of 
                            developing it from scratch. </p>
                        <p>There was considerable back and forth with regards to adding functionality to sketch and measure polylines on the 3D map. The idea here was to allow the user to measure the distances on the 
                            trail they’d like to hike. In this case, a lot of time was spent figuring out why the sketch and measurement outputs would not display on the map, despite the widget and sketching operations 
                            being apparent. In the end, it was found that the graphic layer wasn’t being “viewed” on the right layer, and hence was being hidden. It would work after this, however, upon discussion, we 
                            rationalized that this feature was clunky and did not add value to the trail map.  </p>
                        <p>We instead opted for an Elevation Profile which provides more extensive features that is valuable to the user and has provided modules, accessible documentation and sample code to reference. 
                            Again, there were initial difficulty integrating the code. Fortunately, some of the code from the now-obsolete polyline sketching feature worked well with the elevation profile. A little more 
                            re-arranging and variable renaming and now an Elevation profile functionality is enabled. Although the polyline sketch/measurement was a misstep in hindsight, the knowledge (and coding) gained 
                            from it helped to produce an even better end-product. </p>
                        <h4>Lessons Learned</h4>
                        <p>We realized that to adapt the provided code to the way we want it, a comprehensive, low-level understanding of what the code is required; a high-level understanding is not sufficient when troubleshooting. 
                            This could be achieved mainly by spending time exploring the documentation and gaining experience. </p>
                        <p>With this in mind, developing an application does not seem so daunting when considering the resources to draw from. We understand now that it is more efficient and even encouraged to build upon existing 
                            works rather than starting from scratch (ie don’t re-invent the wheel) </p>     
                    </div>
                </article>
   
            </section>
        </main>
        
        <footer> 
            <p class="footernotes">&#169; <script async>document.write(new Date().getFullYear())</script>. Vita2022 Inc. All Rights Reserved. Any VITA2022 products are Trademarks owned by SpiderWeb Group in GEOM99 Web Design</p>
            <p class="footernotes">Email: <a class=deadlink>infoinquest@VITA2022.ca</a> | Phone: <a class=deadlink>(416) 888-8888</a> | <a class=deadlink>Terms of Use</a> | <a class=deadlink>Privacy Statement</a> | <a class=deadlink>Accessibility</a></p>
        </footer>
    </body>
</html>
